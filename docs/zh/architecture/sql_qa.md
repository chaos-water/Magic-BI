# sql_qa
sql_qa主要用于实现用户与数据库的对话，该功能有3种运行模式：微调模型、智能体和自由探索。
## 微调模型模式
该模式下，准确率通常在95%以上。在该模式下，有2个运行阶段：
### 模型微调阶段
基于用户自行构建、自由探索模式自动生成和数据增强阶段生成的微调数据集，微调基座大语言模型，生成领域模型。通常选用7～9B的基座大语言模型，5张及以上的80G显卡进行微调。
微调时间，取决于微调数据量及显卡型号，大部分情况下，一天内完成微调。
### 模型运行阶段
在模型运行阶段，SQL的生成分为三个阶段：
### 表选择阶段
在该阶段，智能体从数据库的众多表中选择一个或多个可以回答用户问题的表。
### SQL生成阶段
在该阶段，智能体生成能回答用户问题的SQL语句。
### 数据库检索阶段
在该阶段，智能体执行上一阶段生成的SQL语句，生成检索结果，并通过大语言模型对该结果进行解读。
## 智能体模式
该模式下，准确率通常在60%以上。该模式下，有多种信息用来提升准确率，但根据我们的经验，准确率最多60%以上。智能体模式通常适用于不具备模型微调能力的用户，
否则不建议使用该模式。 以下是一些可以提升准确率的信息，用户可以尽可能多的添加：
### 问答对模版
问答对是用户自己总结的或自由探索模式下自动生成的“问题-SQL问答对”，大语言模型会参考这些问答对回答用户问题。
### 表说明
表说明是用户对数据库中表功能的说明。当一些表有特俗功能时，用户需要添加表说明。
### 领域知识
领域知识是指数据库对应的领域的专有知识，比如行业黑话等。
## 自由探索模式
在该模式下，Magic-BI会自动探索某个数据的结构，并尝试生成“问题-SQL”问答对，这些生成的问答对，